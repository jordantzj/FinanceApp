{"ast":null,"code":"import _asyncToGenerator from\"/Users/jordantay/Desktop/FinanceReact/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/jordantay/Desktop/FinanceReact/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/jordantay/Desktop/FinanceReact/node_modules/@babel/runtime/regenerator/index.js\";import classes from'./PortfolioItem.module.css';import{useContext,useEffect,useState,Fragment}from'react';import ButtonDelete from'../UI/ButtonDelete';import FetchContext from'../../Store/FetchContext';import ButtonUpdate from'../UI/ButtonUpdate';import PortfolioUpdate from'./PortfolioUpdate';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var axios=require(\"axios\").default;function PortfolioItem(props){var ctx=useContext(FetchContext);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showModal=_useState2[0],setShowModal=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isRefreshed=_useState4[0],setIsRefreshed=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),stockPrice=_useState6[0],setStockPrice=_useState6[1];function onDeleteStockHandler(){return _onDeleteStockHandler.apply(this,arguments);}function _onDeleteStockHandler(){_onDeleteStockHandler=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsRefreshed(true);_context.next=3;return fetch('http://127.0.0.1:8000/stock-delete/'+props.id,{method:'DELETE',headers:{'Content-Type':'application/json'}});case 3:setIsRefreshed(false);case 4:case\"end\":return _context.stop();}}},_callee);}));return _onDeleteStockHandler.apply(this,arguments);}useEffect(function(){ctx.onFetchStockList();},[isRefreshed]);var onShowModalHandler=function onShowModalHandler(){setShowModal(true);};var hideModalHandler=function hideModalHandler(){setShowModal(false);};useEffect(function(){var APIKEY='GCtknMw46M8sqfHfm639066y2xmvr95t5A16rhkx';var timer=setTimeout(function(){var stockPrice={method:'GET',url:'https://yfapi.net/v6/finance/quote?symbols='+props.ticker,params:{modules:'defaultKeyStatistics,assetProfile'},headers:{\"x-api-key\":APIKEY}};axios.request(stockPrice).then(function(response){var stockBid=response.data.quoteResponse.result[0].bid;var stockAsk=response.data.quoteResponse.result[0].ask;var currentPrice=((stockAsk+stockBid)/2).toFixed(2);setStockPrice(currentPrice);}).catch(function(error){console.error(error);});},1000);return function(){return clearTimeout(timer);};},[]);return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{className:classes.td,children:[props.ticker,\" \"]}),/*#__PURE__*/_jsxs(\"td\",{className:classes.td,children:[props.name,\" \"]}),/*#__PURE__*/_jsxs(\"td\",{className:classes.td,children:[stockPrice,\" \"]}),/*#__PURE__*/_jsx(\"td\",{className:classes.td_amount,children:props.amount}),/*#__PURE__*/_jsxs(\"td\",{className:classes.td,children:[\" $\",props.mark]}),/*#__PURE__*/_jsxs(\"td\",{className:classes.td,children:[\" $\",props.mark*props.amount]}),/*#__PURE__*/_jsxs(\"td\",{className:classes.td,children:[\" $\",(props.amount*stockPrice).toFixed(2)]}),/*#__PURE__*/_jsxs(\"td\",{className:classes.td,children:[\" $\",(props.amount*stockPrice-props.mark*props.amount).toFixed(2)]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(ButtonDelete,{onClick:onDeleteStockHandler,children:\"DELETE\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(ButtonUpdate,{onClick:onShowModalHandler,children:\"UPDATE\"})}),showModal&&/*#__PURE__*/_jsx(PortfolioUpdate,{onClose:hideModalHandler,id:props.id})]})});}export default PortfolioItem;","map":{"version":3,"sources":["/Users/jordantay/Desktop/FinanceReact/src/components/Portfolio/PortfolioItem.js"],"names":["classes","useContext","useEffect","useState","Fragment","ButtonDelete","FetchContext","ButtonUpdate","PortfolioUpdate","axios","require","default","PortfolioItem","props","ctx","showModal","setShowModal","isRefreshed","setIsRefreshed","stockPrice","setStockPrice","onDeleteStockHandler","fetch","id","method","headers","onFetchStockList","onShowModalHandler","hideModalHandler","APIKEY","timer","setTimeout","url","ticker","params","modules","request","then","response","stockBid","data","quoteResponse","result","bid","stockAsk","ask","currentPrice","toFixed","catch","error","console","clearTimeout","td","name","td_amount","amount","mark"],"mappings":"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","sourcesContent":["import classes from './PortfolioItem.module.css';\nimport { useContext, useEffect, useState, Fragment } from 'react';\nimport ButtonDelete from '../UI/ButtonDelete';\nimport FetchContext from '../../Store/FetchContext';\nimport ButtonUpdate from '../UI/ButtonUpdate';\nimport PortfolioUpdate from './PortfolioUpdate';\nvar axios = require(\"axios\").default;\n\n\nfunction PortfolioItem(props) {\n    const ctx = useContext(FetchContext);\n    const [showModal, setShowModal] = useState(false)\n    const [isRefreshed, setIsRefreshed] = useState(false)\n    const [stockPrice, setStockPrice] = useState()\n\n    async function onDeleteStockHandler() {\n        setIsRefreshed(true)\n        await fetch('http://127.0.0.1:8000/stock-delete/' + props.id, {\n            method: 'DELETE',\n            headers: {\n                'Content-Type': 'application/json'\n            }\n        })\n\n        setIsRefreshed(false)\n    }\n\n    useEffect(() => {\n        ctx.onFetchStockList();\n    }, [isRefreshed]);\n\n    const onShowModalHandler = () => {\n        setShowModal(true);\n    }\n    const hideModalHandler = () => {\n        setShowModal(false);\n    }\n\n\n    useEffect(() => {\n        const APIKEY = 'GCtknMw46M8sqfHfm639066y2xmvr95t5A16rhkx'\n\n        const timer = setTimeout(() => {\n            var stockPrice = {\n                method: 'GET',\n                url: 'https://yfapi.net/v6/finance/quote?symbols=' + props.ticker,\n                params: { modules: 'defaultKeyStatistics,assetProfile' },\n                headers: {\n                    \"x-api-key\": APIKEY\n                }\n            };\n            axios.request(stockPrice).then(function (response) {\n                const stockBid = response.data.quoteResponse.result[0].bid\n                const stockAsk = response.data.quoteResponse.result[0].ask\n                const currentPrice = ((stockAsk + stockBid) / 2).toFixed(2)\n\n                setStockPrice(currentPrice)\n\n            }).catch(function (error) {\n                console.error(error)\n            })\n\n        }, 1000)\n\n        return () => clearTimeout(timer);\n\n    }, [])\n\n\n    return (\n        <Fragment>\n\n            <tr>\n                <td className={classes.td}>{props.ticker} </td>\n                <td className={classes.td}>{props.name} </td>\n                <td className={classes.td}>{stockPrice} </td>\n                <td className={classes.td_amount}>{props.amount}</td>\n                <td className={classes.td}> ${props.mark}</td>\n                <td className={classes.td}> ${props.mark*props.amount}</td>\n                <td className={classes.td}> ${(props.amount*stockPrice).toFixed(2)}</td>\n                <td className={classes.td}> ${(props.amount*stockPrice-props.mark*props.amount).toFixed(2)}</td>\n                <td><ButtonDelete onClick={onDeleteStockHandler}>DELETE</ButtonDelete></td>\n                <td><ButtonUpdate onClick={onShowModalHandler} >UPDATE</ButtonUpdate></td>\n                {showModal && <PortfolioUpdate onClose={hideModalHandler} id={props.id} />}\n\n            </tr>\n\n        </Fragment>\n    )\n}\n\nexport default PortfolioItem;"]},"metadata":{},"sourceType":"module"}